<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="./style.css">
</head>

<body>
    <h1>Log-In</h1>
    <form>
        <input type="text" name="name" id="name"><br>
        <input type="submit" id="but" value="Login">
    </form>
    <div id="person">soemting</div>
    <script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
    <script>
        const pe = document.getElementById('person')
        const nameVal = document.getElementById('name')
        const btn = document.getElementById('but')
        const form = document.querySelector('form')
        const fetchPeople = async () => {
            try {
                const { data } = await axios.get('/api/persons')
                // console.log(data.data)
                const person = data.data.map(e => {
                    return `<h5>${e.person}</h5>`
                })
                pe.innerHTML = person.join('')
                // console.log(data.data[0].person)
            } catch (e) {
                console.log(e)
            }
        }
        fetchPeople()
        btn.addEventListener('click', async (e) => {
            e.preventDefault()
            // console.log(nameVal.value)
            try {
                const { data } = await axios.post('/api/add-person', { 'name': nameVal.value })
                // console.log(data.success)
                const el = document.createElement('h5')
                el.innerText = data.person
                pe.appendChild(el)
                form.reset()
            } catch (e) {
                console.log(e)
            }
        })

    </script>
</body>

</html>